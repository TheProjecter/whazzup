$def with (feeds, appengine)

<link rel=stylesheet type="text/css" href="static/style.css">

<title>What's up - Sites</title>
<h1>Sites</h1>

<table>
<tr><th>
    <th>Feed
    <th>Posts
    <th>Score
    <th>Last checked
$if not appengine:
    <th>Unread
    <th>Being read
  
$for site in feeds:
    $ klass = ""
    $ id = site.get_local_id()
    $if site.get_error():
        $ klass = "class=error"
    <tr $klass>
    <td><a href="/delete-site/$id"><img src=static/read.png></a>
    <td><a href="site/$id">$(site.get_title())</a>
    <td>$(len(site.get_items()))
    <td>$(site.get_ratio())
    <td>$(site.nice_time_since_last_read())
$if not appengine:
    <td>$(site.get_unread_count())
    <td>$(site.is_being_read())
</table>

<p><form method=post action="/addfeed">
Feed URL: <input type=text name=url size=50><br>
<input type=submit value="Add">
</form>

<p><form method=post enctype="multipart/form-data" action="/uploadopml">
Import OPML feed list: <input type=file name=opml><br>
<input type=submit value="Upload">
</form>
  
