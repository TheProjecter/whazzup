$def with (page, thread_health, low, high, feeddb)

<link rel=stylesheet type="text/css" href="static/style.css">

<title>What's up</title>
<h1>What's up</h1>

<div class=health>$:thread_health<br>Items: $(feeddb.get_item_count())</div>

<table>
$ ix = low
$for item in feeddb.get_item_range(low, high):
    <tr><td>$(ix + 1).
    <td><a href="/vote/up/$(item.get_local_id())"><img src=static/up.png></a>
    <td><a href="/faveform/$(item.get_local_id())"><img src=static/star.png></a>
    <td><a href="$(item.get_link())">$(item.get_title())</a>

    <tr><td>
    <td><a href="/vote/down/$(item.get_local_id())"><img src=static/down.png></a>
    <td><a href="/vote/read/$(item.get_local_id())"><img src=static/read.png></a>
    <td style="font-size: 75%%; color: gray">
    $(item.get_site().get_title())
    $if item.get_author():
        , $(item.get_author())
    <a href="/item/$(item.get_local_id())" style="color: inherit">[*]</a>

    $ ix += 1

</table>

<p>
$if page:
    <a href="/$(page - 1)">previous</a>

$for ix in range((feeddb.get_item_count() / 25) + 1):
    $if ix == page:
        <b>$(ix + 1)</b>
    $else:
        <a href="/$ix">$(ix + 1)</a>
<a href="/$(page + 1)">next</a>

<p><a href="/reload">Reload</a> | 
<a href="/sites">Sites</a> | 
<a href="/shutdown">Shutdown</a> | 
<!--a href="/faveform/">Add fave</a> | -->
<a href="/recalc">Recalculate</a>
<p>Up: $(feeddb.get_vote_stats()[0]), down: $(feeddb.get_vote_stats()[1])
